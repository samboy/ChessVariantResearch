== The number of non-colorbound short range leapers ==

Let’s look at all of the possible short range leapers on a
square board.  Let’s look at pieces which can leap, at most, two
squares away.  One possible leaper is the knight:

- O - O -
O - - - O
- - X - -
O - - - O
- O - O -

Other leapers also exist.  We include pieces like a piece which
moves like a king (mann or commoner):

- - - - -
- O O O -
- O X O -
- O O O -
- - - - -

Given this, how many non-colorbound leapers do we have?  We know
that we have 2^24 total possible pieces (24 possible squares to
move to), but some of them are colorbound, i.e. a given piece
can not reach every square on the board.  

Let’s look at the historical form of the Queen, the Ferz, which
exists in Shatranj and some modern regional chess variants including
Senterej, Makruk, Sittuyin, and Asean chess:

- - - - -
- O - O -
- - X - -
- O - O -
- - - - -

The piece moves like the modern bishop, but only one square.  Like
this bishop, this piece is colorbound; it can only reach 32 of the
64 squares on an 8x8 chess board.

Point being, some pieces are colorbound (there are other forms
where a piece can not reach all 64 possible squares, such as the
pawn, discussed in more detail below).  How many?

Of the 16,777,215 pieces that exist, only 325,135 are in any form
colorbound.  Some 16,452,080 pieces are not colorbound.  In more
detail:

All pieces here have all their leaps within 2 squares
16,452,080 total non-colorbound pieces
2,944 total bishop-like colorbound pieces
      104 pieces with 3 moves
    2,513 pieces with 4 moves
   20,368 pieces with 5 moves
   92,218 pieces with 6 moves
  285,796 pieces with 7 moves
  669,556 pieces with 8 moves
1,251,284 pieces with 9 moves
1,923,680 pieces with 10 moves
2,476,572 pieces with 11 moves
2,696,337 pieces with 12 moves
2,493,820 pieces with 13 moves
1,960,770 pieces with 14 moves
1,307,440 pieces with 15 moves
  735,467 pieces with 16 moves
  346,104 pieces with 17 moves
  134,596 pieces with 18 moves
   42,504 pieces with 19 moves
   10,626 pieces with 20 moves
    2,024 pieces with 21 moves
      276 pieces with 22 moves
       24 pieces with 23 moves
        1 pieces with 24 moves
With riders, 282,232,643,280 total possible non-colorbound pieces

The last line adds riders to the above count.  I described the
historical ferz above (Russian still uses the word “Ferz” for
the Queen, but the piece now has the modern move); we can also
have a “ferz-rider” where, after moving one square, if the following
square in the same direction is empty or occupied by an enemy piece,
we can move again.  This process continues as long as the square
is empty (the move stops when capturing an enemy piece).

A “ferz-rider” is today’s bishop piece.  Other riders exist: The
knight-rider is a well-known fairy piece, and the queen can be
thought of as a king-move-rider.

We can also imagine a piece which, say, moves like a bishop forwards
but a ferz backwards.  This is possible to do with all of the 
16,277,215 leapers that move within two squares.  If we only
count non-colorbound pieces, we have some 282,232,643,280 different
possible combinations of leapers and riders.

== A binary representation ==

Let’s look at all possible pieces where a piece can go within two
sqaures in a square board chess variant.  The grid will be this:

- - - - -
- - - - -
- - X - -
- - - - -
- - - - -

A knight, for example, is this:

- O - O -
O - - - O
- - X - -
O - - - O
- O - O -

There are 24 possible squares a piece can go to.  Lets give them numbers:

01 02 03 04 05
06 07 08 09 10
11 12 -- 13 14
15 16 17 18 19
20 21 22 23 24

So, a knight would be 02,04,06,10,16,19,21,23

Let’s make that a 24-bit binary number.  01 is the least significant
digit, 02 is the second least significant digit, 03 the third least
significant digit, and so on.  A knight would look like this in
Python syntax for binary literals:

0b010101000100001000101010

Or, in hex:

0x54422a

Now that we can convert short-range pieces in to a 24-bit binary
number, let’s look at a limitation many of these pieces have.

== Colorbound ==

A bishop in standard chess is *Colorbound*: It can only reach some,
but not all squares on the chess board.

With Bishops, the piece can only hit squares of a given checker color.  
There are other possible forms of a piece which moves in the 5x5 square
around it being colorbound.  This is an incomplete list:

* A piece can only hit squares of a given color on the board
* A piece can only hit every other row on the board
* A piece can only hit every other file on the board
* A piece can not move backwards
* A piece can not move forwards
* A piece can not move left
* A piece can not move right
* Missing NW, NE, SW, or SE movement
* 3-way “staircase” colorbound
* “Pinwheels” are 5-way colorbound
* Some others I have not discovered yet
* Some combination of the above limitations

To determine whether a piece is one of the above types of colorbound
piece, we take the binary representation of the piece, run a binary
(bitwise) or against it and a given mask, and see if the resulting
number has the same value as the mask.  If it does, then the piece is
colorbound in the given manner.

Even if a piece passes all of the above tests, it may still
be colorbound.  Let’s look at one such example:

O O - - -
- - - - O
- - X - -
O - - - -
- - - - -

The masks so far are:

Checker color (bishop) restriction:

01 -- 03 -- 05
-- 07 -- 09 --
11 -- XX -- 14
-- 16 -- 18 --
20 -- 22 -- 24

0b101010101010010101010101
0xaaa555

Every other row:

01 02 03 04 05
-- -- -- -- --
11 12 XX 13 14
-- -- -- -- --
20 21 22 23 24

0b111110000011110000011111
0xf83c1f

Every other file:

01 -- 03 -- 05
06 -- 08 -- 10
11 -- XX -- 14
15 -- 17 -- 19
20 -- 22 -- 24

0b101011010110011010110101
0xad66b5

No backwards move:

01 02 03 04 05
06 07 08 09 10
11 12 XX 13 14
-- -- -- -- --
-- -- -- -- --

0b000000000011111111111111
0x3fff

No forward move:

-- -- -- -- --
-- -- -- -- --
11 12 XX 13 14
15 16 17 18 19
20 21 22 23 24

0b111111111111110000000000
0xfffc00

No left move:

-- -- 03 04 05
-- -- 08 09 10
-- -- XX 13 14
-- -- 17 18 19
-- -- 22 23 24

0b111001110011001110011100
0xe7339c

No right move:

01 02 03 -- --
06 07 08 -- --
11 12 XX -- --
15 16 17 -- --
20 21 22 -- --

0b001110011100110011100111
0x39cce7

No SE move:

01 02 03 04 05
06 07 08 09 --
11 12 XX -- --
15 16 -- -- --
20 -- -- -- --

0b000010001100110111111111
0x8cdff

No NW move:

-- -- -- -- 05
-- -- -- 09 10
-- -- XX 13 14
-- 16 17 18 19
20 21 22 23 24

0b111111111011001100010000
0xffb310

No SW move:

01 02 03 04 05
-- 07 08 09 10
-- -- XX 13 14
-- -- -- 18 19
-- -- -- -- 24

0b100001100011001111011111
0x8633df

No NE move:

01 -- -- -- --
06 07 -- -- --
11 12 XX -- --
15 16 17 18 --
20 21 22 23 24

0b111110111100110001100001
0xfbcc61

3-way colorbound A:

01 -- -- 04 --
-- 07 -- -- 10
-- -- XX -- --
15 -- -- 18 --
-- 21 -- -- 24

0b100100100100001001001001
0x924249

3-way colorbound B:

-- 02 -- -- 05
06 -- -- 09 --
-- -- XX -- --
-- 16 -- -- 19
20 -- -- 23 --

0b010011001000000100110010
0x4c8132

Pinwheel 1:

-- 02 -- -- --
-- -- -- -- 10
-- -- XX -- --
15 -- -- -- --
-- -- -- 23 --

Pinwheel 2:

-- -- -- 04 --
06 -- -- -- --
-- -- XX -- --
-- -- -- -- 19
-- 21 -- -- --

There’s others, but I don’t think I will find all of the possible 
colobound pieces.

== Semi-pinwheel, not colorbound ==

While looking for colorbound pieces, I found an interesting 
non-colorbound piece:

O - - - -
- - - - O
- - X - -
O - - - -
- - - O -

Here is the number of moves to get to a given square on an 8x8 board,
starting at “0”.  We will use hex numbers (“A” is 10, etc.):

2 D B 9 7 5 3 E
A 8 6 4 2 D B 9
5 3 1 C A 8 6 4
2 B 9 7 5 3 1 C
8 6 4 2 0 B 9 7
5 3 1 A 8 6 4 2
2 B 7 5 3 1 C A
8 6 4 2 B 9 7 5

Using the above notation for a piece:

01 -- -- -- --
-- -- -- -- 10
-- -- XX -- --
15 -- -- -- --
-- -- -- 23 --

0b010000000100001000000001
0x404201

== Superset of known non-colorbound pieces ==

If the goal is to just find a lot, if not all, non-colorbound
pieces in a 5x5 grid, that’s far easier to do.  Let’s just look
at three non-colorbound atoms:

Wazir:

-- -- -- -- --
-- -- 08 -- --
-- 12 XX 13 --
-- -- 17 -- --
-- -- -- -- --

0b000000010001100010000000
0x11880

Crab:

-- 02 -- 04 --
-- -- -- -- --
-- -- XX -- --
15 -- -- -- 19
-- -- -- -- --

0b000001000100000000001010
0x4400a

Y:

-- -- -- -- --
-- 07 -- 09 --
-- -- XX -- --
-- -- 17 -- --
-- -- -- -- --

0b000000010000000101000000
0x10140

Note that 90 degree rotations of the Crab and Y will also be 
non-colorbound, but we will not look at those, nor will we look
at stuff like the semi-pinwheel discussed above.

